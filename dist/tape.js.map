{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/services/manager/screen.ts","webpack:///./src/services/manager/uimgr.ts","webpack:///./src/services/navigator/stack.ts","webpack:///./src/utils/env.ts","webpack:///./src/services/display/ui.ts","webpack:///./src/services/manager/bg.ts","webpack:///./src/services/navigator/loader.ts","webpack:///./src/services/navigator/init.ts","webpack:///./src/services/display/popupmanager.ts","webpack:///./src/services/display/toastmanager.ts","webpack:///./src/index.ts","webpack:///./src/adapter.js","webpack:///./src/polyfill.ts","webpack:///./src/services/audio.ts","webpack:///./src/utils/looper.ts","webpack:///./src/services/runtime.ts","webpack:///./src/services/utils.ts","webpack:///./src/utils/any.ts","webpack:///./src/services/display/activity.ts","webpack:///./src/services/display/popupview.ts","webpack:///./src/services/display/toastview.ts","webpack:///./src/services/init.ts"],"names":["root","factory","exports","module","define","amd","a","i","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_offset_x","_offset_y","_design_width","_design_height","_deviation","is3D","width","height","screenRatio","Laya","Browser","clientHeight","laya","utils","clientWidth","initRatio","initWidth","initHeight","Math","abs","Laya3D","init","apply","options","stage","scaleMode","Stage","SCALE_EXACTFIT","alignH","ALIGN_CENTER","alignV","ALIGN_MIDDLE","window","info","designWidth","w","designHeight","h","rw","rh","scale","scaleX","scaleY","initBg","initUI","setDeviation","deviation","getWidth","getHeight","getOffestX","getOffestY","getDesignWidth","getDesignHeight","_uiManager","_mainUILayer","_topUILayer","_inited","_offsetX","_offsetY","_checkInit","Sprite","addChild","x","y","checkFocus","numChildren","getChildAt","setFocus","offsetX","offsetY","moveTopToMainLayer","view","parent","removeChild","addViewToMainLayer","addViewTopLayer","_loaders","_loading","_all","_length","length","_getStack","index","len","_showStack","anim","callback","stack","show","_refreshStack","hide","_popStack","count","splice","forEach","element","exit","focus","navigate","page","params","action","single","open","onShow","onLoaded","loader","push","onLoadProgress","progress","nextProgress","stacks","filter","pop","indexOf","number","popToTop","finish","instance","_finishStack","_debugOn","_env","getEnv","isLayaApp","isConchApp","getAppVersion","getClassName","obj","str","toString","arr","charAt","match","e","getVersion","isDebug","setDebug","on","printError","message","console","error","printDebug","log","setEnv","env","isDev","isProd","handleOnTouchOutside","_bgSprite","_bgAlpha","_bgColor","_isTranslucent","_isShow","_handleOnTouchOutside","_canceledOnTouchOutside","_mask","_onEvent","isShow","canceledOnTouchOutside","stopPropagation","setTimeout","ui","getChildByName","removeChildByName","bgAlpha","refreshBg","bgColor","isTranslucent","refreshCanceledOnTouchOutside","nonPenetrating","alpha","graphics","clear","drawRect","offAll","mouseThrough","Event","CLICK","addChildAt","Component","_bgImage","_bgSkin","_bgSizeGrid","_drawSkin","skin","sizeGrid","Image","setBgSkin","url","setBgColor","color","setBgTexture","load","Handler","texture","fillTexture","getBgSprite","_options","_activity","_isFocus","_pageName","visible","res","_newActivity","_onLoaded","_onLoadProgress","onNavigatorReady","then","onCreate","onNextProgress","activity","easeIn","Ease","linearIn","duration","fromProps","toProps","assign","onResume","Tween","to","onPause","onDestroy","destroy","onFocus","_isReady","_readyResolve","_readyPromise","Promise","resolve","_beginLoadStaticRes","commonRes","_onStaticResLoaded","mainPage","fileVersion","ResourceVersion","type","FILENAME_VERSION","enable","_popups","_fromProps","_toProps","_hidePopup","result","popupView","cb","from","easeOut","linearOut","_hidePopupAnim","_onHide","popup","onHide","removeSelf","_showPopup","_showPopupAnim","setDefaultAnim","showPopup","views","hidePopup","v","_toasts","_popToast","toast","showToast","_on_hide","displayDuration","_pushToast","hideToast","Tape","init3D","start","bg","screen","audio","runtime","navigator","Activity","PopupView","ToastView","Loader","HttpRequest","cache","group","ignoreCache","_url","_type","getTypeFromUrl","URL","formatURL","_cache","_data","loadedMap","event","setGroup","parserMap","_customParse","runWith","_loadImage","_loadSound","_loadTTF","loadRuntime","startsWith","that","response","substr","rt","getFileSystemManager","readFileSync","JSON","parse","contentType","preLoadedMap","_http","onProgress","onError","send","target","varArgs","TypeError","arguments","nextSource","nextKey","writable","configurable","_auidoUrl","_chancel","_playing","_onPlay","_onPause","_onStop","_onError","_onProgress","_onComplete","_position","_duration","_paused","_playTime","_update","position","Date","now","stop","onPlay","onStop","onComplete","isPaused","isPlaying","play","loops","invoke","fixWechatAudioPlay","playUrl","targetUrl","replaceExt","ext","Utils","getFileExtension","searchExt","SoundManager","playSound","loop","pause","resume","removeChannel","destroySound","_musicAudio","AudioController","playMusic","stopAll","stopMusic","stopAllSound","_tasks","_hasLoop","_checkLoop","timer","frameLoop","task","caller","clearAll","array","where","reverse","removeItemForWhere","Looper","viewScale","pivotX","pivotY","pivot","pivotCenter","scaleTime","MOUSE_DOWN","scaleSmallValue","MOUSE_UP","scaleBigValue","MOUSE_OUT","sound","clickSound","bindClick","Button","btn","btn_img","Label","btn_label","btn_sprite","Box","btn_box","randomArrayItem","source","floor","random","randomUUID","_s4","substring","randomInteger","minNum","maxNum","randomNumber","randomArray","randomLength","min","copy","concat","randomObj","toAny","def","ex","parseFloat","isNaN","_inferType","_toNumber_","_toBoolean_","_toObject_","stringify","_toString_","back","redirectTo","initScreen","newOptions","initNavigator","setNavigatorReady"],"mappings":"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","file":"tape.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import { initBg } from \"./bg\";\nimport { initUI } from \"./uimgr\";\n\nlet _offset_x = 0;\nlet _offset_y = 0;\nlet _design_width = 0;\nlet _design_height = 0;\nlet _deviation = 0.01;\n\nexport function initScreen(is3D, width, height, ...options) {\n    _design_width = width;\n    _design_height = height;\n    let screenRatio = Laya.Browser.clientHeight / laya.utils.Browser.clientWidth;\n    let initRatio = height / width;\n    let initWidth = width;\n    let initHeight = height;\n    _offset_x = 0;\n    _offset_y = 0;\n    if (Math.abs(screenRatio / initRatio - 1) > _deviation) {\n        if (screenRatio > initRatio) {\n            initHeight = width * screenRatio;\n            _offset_y = (initHeight - height) / 2;\n        } else if (screenRatio < initRatio) {\n            initWidth = height / screenRatio;\n            _offset_x = (initWidth - width) / 2;\n        }\n    }\n    if (is3D) {\n        Laya3D.init.apply(this, [initWidth, initHeight, ...options]);\n    } else {\n        Laya.init.apply(this, [initWidth, initHeight, ...options]);\n    }\n    Laya.stage.scaleMode = Laya.Stage.SCALE_EXACTFIT;\n    Laya.stage.alignH = Laya.Stage.ALIGN_CENTER;\n    Laya.stage.alignV = Laya.Stage.ALIGN_MIDDLE;\n\n    // 屏幕适配\n    if (typeof window['getAdapterInfo'] !== \"undefined\") {\n        var stage = Laya.stage;\n        var info = window['getAdapterInfo']({ width: initWidth, height: initHeight, scaleMode: Laya.stage.scaleMode });\n        stage.designWidth = info.w; stage.designHeight = info.h; stage.width = info.rw;\n        stage.height = info.rh; stage.scale(info.scaleX, info.scaleY);\n    }\n    \n    initBg();\n    initUI(_offset_x, _offset_y)\n}\n\nfunction setDeviation(deviation) {\n    _deviation = deviation;\n}\n\nfunction getWidth() {\n    return Laya.stage.width;\n}\n\nfunction getHeight() {\n    return Laya.stage.height;\n}\n\nfunction getOffestX() {\n    return _offset_x;\n}\n\nfunction getOffestY() {\n    return _offset_y;\n}\n\nfunction getDesignWidth() {\n    return _design_width;\n}\n\nfunction getDesignHeight() {\n    return _design_height;\n}\n\nexport default {\n    setDeviation,\n    getWidth,\n    getHeight,\n    getOffestX,\n    getOffestY,\n    getDesignWidth,\n    getDesignHeight,\n}","import { setFocus } from \"../navigator/stack\";\nimport NavLoader from \"../navigator/loader\";\n\nlet _inited = false;\nlet _uiManager: Laya.Sprite;\nlet _mainUILayer: Laya.Sprite;\nlet _topUILayer: Laya.Sprite;\nlet _offsetX = 0;\nlet _offsetY = 0;\n\nexport function initUI(offsetX, offsetY) {\n    _offsetX = offsetX;\n    _offsetY = offsetY;\n    _checkInit();\n}\n\nfunction _checkInit() {\n    if (!_inited) {\n        _uiManager = new Laya.Sprite();\n        _uiManager.name = '_tape_stage';\n        _mainUILayer = new Laya.Sprite();\n        _mainUILayer.name = '_tape_main_layer';\n        _topUILayer = new Laya.Sprite();\n        _topUILayer.name = '_tape_top_layer';\n        _uiManager.addChild(_mainUILayer);\n        _uiManager.addChild(_topUILayer);\n        Laya.stage.addChild(_uiManager);\n        _inited = true;\n    }\n    _mainUILayer.x = _offsetX;\n    _mainUILayer.y = _offsetY;\n    _topUILayer.x = _offsetX;\n    _topUILayer.y = _offsetY;\n}\n\nfunction checkFocus() {\n    if (_mainUILayer.numChildren > 0) {\n        let last = _mainUILayer.getChildAt(_mainUILayer.numChildren - 1);\n        if (last instanceof NavLoader) {\n            setFocus(true);\n            return;\n        }\n    }\n    setFocus(false);\n}\n\nfunction moveTopToMainLayer(view: NavLoader) {\n    _checkInit();\n    if (view && view.parent == _mainUILayer) {\n        _mainUILayer.removeChild(view);\n        _mainUILayer.addChild(view);\n    }\n    checkFocus();\n}\n\nfunction addViewToMainLayer(view) {\n    _checkInit();\n    view && _mainUILayer.addChild(view);\n    checkFocus();\n}\n\nfunction addViewTopLayer(view) {\n    _checkInit();\n    view && _topUILayer.addChild(view);\n    checkFocus();\n}\n\nexport default {\n    checkFocus,\n    moveTopToMainLayer,\n    addViewToMainLayer,\n    addViewTopLayer,\n}","import UILoader from \"./loader\";\nimport UIMgr from \"../manager/uimgr\";\n\nlet _loaders = [];\nlet _loading = false;\n\nfunction _all() {\n    return _loaders;\n}\n\nfunction _length() {\n    return _loaders.length;\n}\n\nfunction _getStack(index = 0) {\n    var len = _length();\n    return len > index ? _loaders[len - 1 - index] : null;\n}\n\nfunction _showStack(index = 0, anim = false, callback = null) {\n    let stack = _getStack(index);\n    if (!stack) {\n        return;\n    }\n    stack.show(anim && _length() > 1, callback);\n}\n\nfunction _pushStack(stack) {\n    _loaders.push(stack);\n}\n\nfunction _topStack(stack) {\n    let index = _loaders.indexOf(stack);\n    if (index >= 0) {\n        _loaders.splice(index, 1);\n        _loaders.push(stack);\n        _refreshStack(null);\n        UIMgr.moveTopToMainLayer(stack);\n    }\n}\n\nfunction _refreshStack(callback) {\n    _showStack(0, true, () => {\n        let stack = _getStack(1);\n        if (!stack) {\n            return;\n        }\n        stack.hide();\n        callback && callback();\n    });\n}\n\nfunction _finishStack(stacks) {\n    if (!stacks || stacks.length <= 0) {\n        return;\n    }\n    for (var i = 0; _length() > 1 && i < stacks.length; i++) {\n        var stack = stacks[i];\n        _loaders.splice(_loaders.indexOf(stack), 1);\n        stack.hide();\n        stack.exit();\n    }\n    _showStack(0);\n}\n\nfunction _popStack(count) {\n    if (count >= _length()) {\n        count = _length() - 1;\n    }\n    if (count <= 0) {\n        return;\n    }\n    let pops = _loaders.splice(_length() - count, count);\n    pops.forEach(element => {\n        element.hide();\n        element.exit();\n    });\n    _showStack(0);\n}\n\nexport function setFocus(focus) {\n    let stack = _getStack();\n    if (stack) {\n        stack.focus(focus);\n    }\n}\n\nfunction navigate(page, params = null, action = null, single = false) {\n    if (!params) {\n        params = {};\n    }\n    let open = () => {\n        new UILoader({\n            page,\n            params,\n            onShow: () => {\n                _refreshStack(() => {\n                    action && action(true);\n                });\n            },\n            onLoaded: (loader) => {\n                _loading = false;\n                UIMgr.addViewToMainLayer(loader);\n                _pushStack(loader);\n            },\n            onLoadProgress: (loader, progress) => {\n                if (_loading) {\n                    var stack = _getStack();\n                    stack && stack.nextProgress(progress);\n                }\n            }\n        });\n    }\n    if (single || page.single) {\n        var stacks = [];\n        _all().forEach(stack => {\n            if (stack.filter(page)) {\n                stacks.push(stack);\n            }\n        });\n        stacks.length > 0 ? _topStack(stacks.pop()) : open();\n    } else {\n        open();\n    }\n}\n\nfunction popToTop() {\n    _popStack(_length());\n}\n\nfunction pop(number = 1) {\n    _popStack(number)\n}\n\nfunction finish(page, instance = null) {\n    var stacks = [];\n    _all().forEach(stack => {\n        if (stack.filter(page, instance)) {\n            stacks.push(stack);\n        }\n    });\n    _finishStack(stacks);\n}\n\nexport default {\n    navigate,\n    pop,\n    popToTop,\n    finish,\n}","//////////////////////////\n/////  Env\n//////////////////////////\n\nconst isLayaApp = () => {\n    return window.hasOwnProperty(\"Laya\");\n}\n\nconst isConchApp = () => {\n    return window.hasOwnProperty(\"conch\");\n}\n\n//////////////////////////\n/////  Version\n//////////////////////////\n\nlet _tape_version = \"4.2.0\";\nlet _app_version = '${app_version}';\n\nfunction getVersion(): string {\n    if (_tape_version.indexOf('${') === 0) {\n        return '1.0.0';\n    }\n    return _tape_version;\n}\n\nfunction getAppVersion(): string {\n    if (_app_version.indexOf('${') === 0) {\n        return '1.0.0';\n    }\n    return _app_version;\n}\n\n//////////////////////////\n/////  Debug\n//////////////////////////\n\nlet _debugOn = true;\n\nfunction isDebug() {\n    return _debugOn;\n}\n\nfunction setDebug(on: boolean) {\n    _debugOn = on;\n}\n\nfunction printDebug(message: any, ...options) {\n    if (_debugOn) {\n        console.log(\"Tape:\", message, ...options);\n    }\n}\n\nfunction printError(message: any, ...options) {\n    if (_debugOn) {\n        console.error(\"Tape:\", message, ...options);\n    }\n}\n\nfunction getClassName(obj) {\n    try {\n        if (obj) {\n            let str = obj.toString();\n            let arr;\n            if (str.charAt(0) == '[') {\n                arr = str.match(/\\w+\\s∗(\\w+)\\w+\\s∗(\\w+)/);\n            } else {\n                arr = str.match(/function\\s*(\\w+)/);\n            }\n            if (arr && arr.length == 2) {\n                return arr[1];\n            }\n        }\n    } catch (e) {\n    }\n    return undefined;\n}\n\n//////////////////////////\n/////  Env\n//////////////////////////\n\nlet _env = 'prod';\n\nfunction setEnv(env) {\n    _env = env;\n}\n\nfunction getEnv() {\n    return _env;\n}\n\nfunction isDev() {\n    return getEnv() !== 'prod';\n}\n\nfunction isProd() {\n    return getEnv() === 'prod';\n}\n\nexport default {\n    isLayaApp,\n    isConchApp,\n    getAppVersion,\n    getClassName,\n    getVersion,\n    isDebug,\n    setDebug,\n    printError,\n    printDebug,\n    getEnv,\n    setEnv,\n    isDev,\n    isProd\n}","import screen from \"../manager/screen\";\n\nexport default class ui extends Laya.Component {\n\n    private _bgSprite = null;\n    private _bgAlpha = 0.5;\n    private _bgColor = '#000000';\n    private _isTranslucent = true;\n    private _isShow = false;\n    private _handleOnTouchOutside = null;\n    private _canceledOnTouchOutside = false;\n    private _mask = false;\n    private _onEvent = null;\n\n    constructor(handleOnTouchOutside = null) {\n        super();\n        this._handleOnTouchOutside = handleOnTouchOutside;\n        this._onEvent = (e) => {\n            if (this.isShow && this.canceledOnTouchOutside) {\n                this._handleOnTouchOutside && this._handleOnTouchOutside();\n            }\n            e.stopPropagation();\n        }\n        setTimeout(() => this.initBg(), 0);\n    }\n\n    public set ui(view: Laya.Sprite) {\n        this.removeChildByName('_contentView');\n        view.name = '_contentView';\n        this.addChild(view);\n    }\n\n    public get ui(): Laya.Sprite {\n        return this.getChildByName('_contentView') as Laya.Sprite;\n    }\n\n    public set isShow(isShow) {\n        this._isShow = isShow;\n    }\n\n    public get isShow() {\n        return this._isShow;\n    }\n\n    public set bgAlpha(bgAlpha) {\n        this._bgAlpha = bgAlpha;\n        this.refreshBg();\n    }\n\n    public get bgAlpha() {\n        return this._bgAlpha;\n    }\n\n    public set bgColor(bgColor) {\n        this._bgColor = bgColor;\n        this.refreshBg();\n    }\n\n    public get bgColor() {\n        return this._bgColor;\n    }\n\n    public set isTranslucent(isTranslucent) {\n        this._isTranslucent = isTranslucent;\n        this.refreshBg();\n    }\n\n    public get isTranslucent() {\n        return this._isTranslucent;\n    }\n\n    public set canceledOnTouchOutside(canceledOnTouchOutside) {\n        this._canceledOnTouchOutside = canceledOnTouchOutside;\n        this.refreshCanceledOnTouchOutside();\n    }\n\n    public get canceledOnTouchOutside() {\n        return this._canceledOnTouchOutside;\n    }\n\n    public set nonPenetrating(nonPenetrating) {\n        this._mask = nonPenetrating;\n        this.refreshCanceledOnTouchOutside();\n    }\n\n    public get nonPenetrating() {\n        return this._mask;\n    }\n\n    private refreshBg() {\n        if (!this._bgSprite) {\n            return;\n        }\n        this._bgSprite.alpha = this.bgAlpha;\n        this._bgSprite.graphics.clear();\n        if (!this.isTranslucent) {\n            this._bgSprite.graphics.drawRect(0, 0, this._bgSprite.width, this._bgSprite.height, this.bgColor);\n        }\n    }\n\n    private refreshCanceledOnTouchOutside() {\n        this._bgSprite && this._bgSprite.offAll();\n        if ((this.canceledOnTouchOutside || this.nonPenetrating) && this.ui) {\n            this.ui.mouseThrough = true;\n            this._bgSprite && this._bgSprite.on(Laya.Event.CLICK, this, this._onEvent);\n        }\n    }\n\n    private initBg() {\n        if (this._bgSprite) {\n            return;\n        }\n        this._bgSprite = new Laya.Sprite();\n        this._bgSprite.x = -screen.getOffestX();\n        this._bgSprite.y = -screen.getOffestY();\n        this._bgSprite.width = screen.getWidth();\n        this._bgSprite.height = screen.getHeight();\n        this.addChildAt(this._bgSprite, 0);\n        this.refreshBg();\n        this.refreshCanceledOnTouchOutside();\n    }\n\n}","import screen from \"./screen\";\n\nlet _bgSprite: Laya.Sprite = null;\nlet _bgImage: Laya.Image = null;\nlet _bgSkin = null;\nlet _bgSizeGrid = null;\n\nfunction _drawSkin() {\n    if (_bgImage && _bgSkin) {\n        _bgImage.skin = _bgSkin;\n    }\n    if (_bgImage && _bgSizeGrid) {\n        _bgImage.sizeGrid = _bgSizeGrid;\n    } else {\n        _bgImage.sizeGrid = '';\n    }\n}\n\nexport function initBg() {\n    _bgSprite = Laya.stage.getChildByName('_tape_bg_layer') as Laya.Sprite;\n    if (!_bgSprite) {\n        _bgSprite = new Laya.Sprite;\n        _bgSprite.name = '_tape_bg_layer';\n        Laya.stage.addChild(_bgSprite);\n\n        _bgImage = new Laya.Image;\n        _bgImage.name = '_bg_image';\n        _bgSprite.addChild(_bgImage);\n    }\n\n    _bgSprite.width = screen.getWidth();\n    _bgSprite.height = screen.getHeight();\n\n    _bgImage.width = screen.getWidth();\n    _bgImage.height = screen.getHeight();\n\n    _drawSkin();\n}\n\nfunction setBgColor(color) {\n    if (!_bgSprite) {\n        return;\n    }\n    _bgSprite.graphics.clear();\n    _bgSprite.graphics.drawRect(0, 0, _bgSprite.width, _bgSprite.height, color);\n}\n\nfunction setBgSkin(url, sizeGrid = null) {\n    _bgSkin = url;\n    _bgSizeGrid = sizeGrid;\n    _drawSkin();\n}\n\nfunction setBgTexture(url) {\n    if (!_bgSprite) {\n        return;\n    }\n    _bgSprite.graphics.clear();\n    Laya.loader.load(url, Laya.Handler.create(this, (texture) => {\n        try {\n            _bgSprite.graphics.fillTexture(texture, 0, 0, _bgSprite.width, _bgSprite.height, 'repeat');\n        } catch (error) {\n        }\n    }));\n}\n\nfunction getBgSprite() {\n    return _bgSprite;\n}\n\nexport default {\n    setBgSkin,\n    setBgColor,\n    setBgTexture,\n    getBgSprite,\n}","import UIMgr from \"../manager/uimgr\";\nimport Activity from \"../display/activity\";\nimport { onNavigatorReady } from \"./init\";\nimport env from \"../../utils/env\";\n\nexport default class extends Laya.Component {\n\n    private _options = null;\n    private _activity: Activity = null;\n    private _isShow = false;\n    private _isFocus = false;\n    private _pageName = \"\";\n\n    constructor(options) {\n        super();\n        this.visible = false;\n        this._options = options;\n        this._pageName = env.getClassName(this._options.page);\n        env.printDebug(\"init\", this._pageName);\n        let res = this._options.page.res;\n        if (res && res.length > 0) {\n            Laya.loader.load(res, Laya.Handler.create(this, () => {\n                this._newActivity();\n                this._onLoaded();\n                env.printDebug(\"onLoaded\", this._pageName);\n            }), Laya.Handler.create(this, (progress) => {\n                this._onLoadProgress(progress);\n            }, null, false));\n        } else {\n            this._newActivity();\n            this._onLoaded();\n            env.printDebug(\"onLoaded\", this._pageName);\n        }\n    }\n\n    _newActivity() {\n        if (this._activity) {\n            return;\n        }\n        env.printDebug(\"newActivity\", this._pageName);\n        this._activity = new this._options.page({\n            page: this._options.page,\n            params: this._options.params\n        });\n    }\n\n    _onLoaded() {\n        onNavigatorReady().then(() => {\n            this._options.onLoaded && this._options.onLoaded(this);\n            this.addChild(this._activity);\n            env.printDebug(\"onCreate\", this._pageName);\n            this._activity.onCreate && this._activity.onCreate();\n            this._options.onShow && this._options.onShow();\n        });\n    }\n\n    _onLoadProgress(progress) {\n        this._options.onLoadProgress && this._options.onLoadProgress(this, progress);\n    }\n\n    nextProgress(progress) {\n        this._activity.onNextProgress && this._activity.onNextProgress(progress);\n    }\n\n    filter(page, activity) {\n        if (page === this._options.page) {\n            return !activity || activity === this._activity;\n        }\n        return false;\n    }\n\n    show(anim, callback) {\n        if (this.visible) {\n            return;\n        }\n        if (this._isShow) {\n            return;\n        }\n        this._isShow = true;\n        var easeIn = this._activity.easeIn || Laya.Ease.linearIn;\n        var duration = this._activity.duration || 0;\n        var fromProps = this._activity.fromProps || {};\n        var toProps = this._activity.toProps || {};\n        if (anim && easeIn && duration > 0) {\n            Object.assign(this, fromProps);\n            env.printDebug(\"onResume\", this._pageName);\n            this._activity.onResume && this._activity.onResume();\n            this.visible = true;\n            Laya.Tween.to(this, toProps, duration, easeIn, Laya.Handler.create(this, () => {\n                callback && callback();\n            }));\n        } else {\n            env.printDebug(\"onResume\", this._pageName);\n            this._activity.onResume && this._activity.onResume();\n            this.visible = true;\n            callback && callback();\n        }\n        UIMgr.checkFocus();\n    }\n\n    hide() {\n        if (!this.visible) {\n            return;\n        }\n        if (!this._isShow) {\n            return;\n        }\n        this._isShow = false;\n        env.printDebug(\"onPause\", this._pageName);\n        this._activity.onPause && this._activity.onPause();\n        this.visible = false;\n        this.focus(false);\n    }\n\n    exit() {\n        env.printDebug(\"onDestroy\", this._pageName);\n        this._activity.onDestroy && this._activity.onDestroy();\n        this.destroy();\n    }\n\n    focus(focus) {\n        if (this._isFocus === focus) {\n            return;\n        }\n        this._isFocus = focus;\n        env.printDebug(\"onFocus\", this._pageName, focus);\n        this._activity.onFocus && this._activity.onFocus(focus);\n    }\n\n}","import NavStack from \"./stack\";\n\nlet _options = null;\nlet _inited = false;\nlet _isReady = false;\nlet _readyResolve = null;\nlet _readyPromise: Promise<any> = new Promise((resolve) => {\n    _readyResolve = resolve;\n});\n\nfunction _enableResourceVersion() {\n    if (_options && _options.fileVersion) {\n        Laya.ResourceVersion.type = Laya.ResourceVersion.FILENAME_VERSION;\n        Laya.ResourceVersion.enable(_options.fileVersion, Laya.Handler.create(null, () => {\n            _beginLoadStaticRes();\n        }))\n    } else {\n        _beginLoadStaticRes();\n    }\n}\n\nfunction _beginLoadStaticRes() {\n    let res = _options.commonRes || [];\n    if (res.length > 0) {\n        Laya.loader.load(res, Laya.Handler.create(null, () => {\n            _onStaticResLoaded();\n            _options.onLoaded && _options.onLoaded();\n        }), Laya.Handler.create(this, (progress) => {\n            _options.onLoadProgress && _options.onLoadProgress(progress);\n        }, null, false));\n    } else {\n        _options.onLoadProgress && _options.onLoadProgress(100);\n        _options.onLoaded && _options.onLoaded();\n        _onStaticResLoaded();\n    }\n}\n\nfunction _onStaticResLoaded() {\n    _options.mainPage && NavStack.navigate(_options.mainPage);\n}\n\nexport function initNavigator(options) {\n    if (!options || _inited) {\n        return;\n    }\n    _options = options;\n    _enableResourceVersion();\n    _inited = true;\n}\n\nexport function onNavigatorReady(): Promise<any> {\n    if (_isReady) {\n        return Promise.resolve();\n    }\n    return _readyPromise;\n}\n\nexport function setNavigatorReady(): void {\n    if (_isReady) {\n        return;\n    }\n    _isReady = true;\n    _readyResolve();\n    _readyResolve = null;\n    _readyPromise = null;\n}","import UIMgr from \"../manager/uimgr\";\n\nlet _popups = {};\nlet _fromProps = { alpha: 0 }\nlet _toProps = { alpha: 1 }\n\nfunction _showPopupAnim(popupView, cb) {\n    let from = popupView.fromProps || _fromProps || {};\n    let to = popupView.toProps || _toProps || {};\n    let easeIn = popupView.easeIn || Laya.Ease.linearIn;\n    let duration = popupView.duration || 500;\n    Object.assign(popupView, from);\n    Laya.Tween.to(popupView, to, duration, easeIn, Laya.Handler.create(this, () => {\n        cb && cb(popupView);\n    }));\n}\n\nfunction _hidePopupAnim(popupView, cb) {\n    let from = popupView.toProps || _toProps || {};\n    let to = popupView.fromProps || _fromProps || {};\n    let easeOut = popupView.easeOut || Laya.Ease.linearOut;\n    let duration = popupView.duration || 500;\n    Object.assign(popupView, from);\n    Laya.Tween.to(popupView, to, duration, easeOut, Laya.Handler.create(this, () => {\n        cb && cb(popupView);\n    }));\n}\n\nfunction _hidePopup(view, result) {\n    _hidePopupAnim(view, () => {\n        view._onHide && view._onHide(view.popup, result);\n        view.isShow = false;\n        view.onHide && view.onHide(view.popup, result);\n        view.removeSelf && view.removeSelf();\n        view.destroy && view.destroy();\n        UIMgr.checkFocus();\n    });\n}\n\nfunction _showPopup(view) {\n    _showPopupAnim(view, () => {\n        view.isShow = true;\n    });\n}\n\nfunction setDefaultAnim(fromProps, toProps) {\n    _fromProps = fromProps;\n    _toProps = toProps;\n}\n\nfunction showPopup(popup, params = null, onHide = null) {\n    let views = _popups[popup];\n    let view = new popup();\n    view.popup = popup;\n    view.params = params || {};\n    view._onHide = onHide;\n    if (views) {\n        views.push(view);\n    } else {\n        _popups[popup] = [view];\n    }\n    UIMgr.addViewToMainLayer(view);\n    view.onShow && view.onShow();\n    _showPopup(view);\n}\n\nfunction hidePopup(popup, view = null, result = null) {\n    var views = _popups[popup];\n    if (view) {\n        let index = views ? views.indexOf(view) : -1;\n        if (index < 0) {\n            return;\n        }\n        views.splice(index, 1);\n        _hidePopup(view, result);\n    } else {\n        views && views.splice(0, views.length).forEach(v => {\n            _hidePopup(v, result);\n        });\n    }\n}\n\nexport default {\n    setDefaultAnim,\n    showPopup,\n    hidePopup\n}","import UIMgr from \"../manager/uimgr\";\n\nlet _toasts: { [key: string]: any[] } = {};\n\nfunction _pushToast(toast, view) {\n    if (_toasts[toast]) {\n        _toasts[toast].push(view);\n    } else {\n        _toasts[toast] = [view];\n    }\n}\n\nfunction _popToast(toast, view) {\n    if (!_toasts[toast]) {\n        return [];\n    }\n    if (view && _toasts[toast].length > 1) {\n        _toasts[toast].splice(_toasts[toast].indexOf(view), 1);\n        return [view];\n    } else {\n        let views = _toasts[toast] || [];\n        delete _toasts[toast];\n        return views;\n    }\n}\n\nfunction showToast(toast, params = null, onHide = null) {\n    var view = new toast;\n    view._on_hide = onHide;\n    view.toast = toast;\n    view.params = params || {};\n    view.onShow && view.onShow();\n    let from = view.fromProps || { alpha: 0 };\n    let to = view.toProps || { alpha: 1 };\n    let easeIn = view.easeIn || Laya.Ease.linearIn;\n    let easeOut = view.easeOut || Laya.Ease.linearOut;\n    let duration = view.duration;\n    let displayDuration = view.displayDuration;\n    Object.assign(view, from);\n    Laya.Tween.to(view, to, duration, easeIn, Laya.Handler.create(this, () => {\n        view.isShow = true;\n    }), 0);\n    if (displayDuration != -1) {\n        Laya.Tween.to(view, from, duration, easeOut, Laya.Handler.create(this, () => {\n            if (view) {\n                _popToast(toast, view);\n                view._on_hide && view._on_hide(view.toast);\n                view.isShow = false;\n                view.onHide && view.onHide();\n                view.destroy();\n            }\n        }), displayDuration + duration);\n    }\n    _pushToast(toast, view);\n    UIMgr.addViewTopLayer(view);\n}\n\nfunction hideToast(toast, view = null) {\n    let list = _popToast(toast, view);\n    list.forEach(view => {\n        view._on_hide && view._on_hide(view.toast);\n        view.isShow = false;\n        view.onHide && view.onHide();\n        view.destroy();\n    });\n}\n\nexport default {\n    showToast,\n    hideToast,\n}","import \"./adapter\";\nimport \"./polyfill\";\nimport bg from \"./services/manager/bg\";\nimport screen from \"./services/manager/screen\";\nimport audio from './services/audio';\nimport env from \"./utils/env\";\nimport runtime from \"./services/runtime\";\nimport utils from './services/utils';\nimport navigator from \"./services/navigator/stack\";\nimport popup from \"./services/display/popupmanager\";\nimport toast from \"./services/display/toastmanager\";\nimport Activity from \"./services/display/activity\";\nimport PopupView from \"./services/display/popupview\";\nimport ToastView from \"./services/display/toastview\";\nimport { init, init3D, start } from './services/init';\n\nconst Tape = {\n    env,\n    init,\n    init3D,\n    start,\n    bg,\n    screen,\n    audio,\n    runtime,\n    utils,\n    navigator,\n    popup,\n    toast,\n    Activity,\n    PopupView,\n    ToastView,\n}\n\nif (typeof window !== \"undefined\") {\n    (window as any).Tape = Tape;\n}\n\nexport = {\n    Tape\n}\n","// 文件加载\nif (Laya && Laya.Loader) {\n  var Loader = Laya.Loader;\n  var HttpRequest = Laya.HttpRequest;\n  var __proto = Loader.prototype;\n  __proto.load = function (url, type, cache, group, ignoreCache) {\n    (cache === void 0) && (cache = true);\n    (ignoreCache === void 0) && (ignoreCache = false);\n    this._url = url;\n    if (url.indexOf(\"data:image\") === 0) this._type = type = \"image\";\n    else {\n      this._type = type || (type = this.getTypeFromUrl(url));\n      url = Laya.URL.formatURL(url);\n    }\n    this._cache = cache;\n    this._data = null;\n    if (!ignoreCache && Loader.loadedMap[url]) {\n      this._data = Loader.loadedMap[url];\n      this.event(/*laya.events.Event.PROGRESS*/\"progress\", 1);\n      this.event(/*laya.events.Event.COMPLETE*/\"complete\", this._data);\n      return;\n    }\n    if (group) Loader.setGroup(url, group);\n    if (Loader.parserMap[type] != null) {\n      this._customParse = true;\n      if (((Loader.parserMap[type]) instanceof laya.utils.Handler)) Loader.parserMap[type].runWith(this);\n      else Loader.parserMap[type].call(null, this);\n      return;\n    }\n    if (type === \"image\" || type === \"htmlimage\" || type === \"nativeimage\") return this._loadImage(url);\n    if (type === \"sound\") return this._loadSound(url);\n    if (type === \"ttf\") return this._loadTTF(url);\n    try {\n\n      // 在这里，插入添加适配读取本地资源\n      if (typeof loadRuntime !== 'undefined' && !url.startsWith(\"http\")) {\n        var that = this;\n        setTimeout(function () {\n          if (url.startsWith('file://')) {\n            url = url.substr('file://'.length);\n          }\n          var response;\n          if (type == 'pkm' || type === \"arraybuffer\") {\n            response = rt.getFileSystemManager().readFileSync(url);\n          } else {\n            response = rt.getFileSystemManager().readFileSync(url, \"utf8\");\n            if ((type == 'atlas' || type == 'json') && typeof response !== \"undefined\") {\n              response = JSON.parse(response);\n            }\n          }\n          that.onLoaded(response);\n        }, 0);\n        return;//这里记得 return\n      }\n    } catch (error) {\n    }\n    // 添加适配代码结束，下面是原本 laya 代码\n    var contentType;\n    switch (type) {\n      case \"atlas\":\n      case \"plf\":\n        contentType = \"json\";\n        break;\n      case \"font\":\n        contentType = \"xml\";\n        break;\n      case \"pkm\":\n        contentType = \"arraybuffer\";\n        break\n      default:\n        contentType = type;\n    }\n    if (Loader.preLoadedMap[url]) {\n      this.onLoaded(Loader.preLoadedMap[url]);\n    } else {\n      if (!this._http) {\n        this._http = new HttpRequest();\n        this._http.on(/*laya.events.Event.PROGRESS*/\"progress\", this, this.onProgress);\n        this._http.on(/*laya.events.Event.ERROR*/\"error\", this, this.onError);\n        this._http.on(/*laya.events.Event.COMPLETE*/\"complete\", this, this.onLoaded);\n      }\n      this._http.send(url, null, \"get\", contentType);\n    }\n  }\n}\n","if (typeof Object.assign != 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target, varArgs) { // .length of function is 2\n      'use strict';\n      if (target == null) { // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) { // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}","import env from \"../utils/env\";\nimport loop from \"../utils/looper\";\n\nfunction fixWechatAudioPlay(callback: Function) {\n    if (window && window['WeixinJSBridge']) {\n        try {\n            window['WeixinJSBridge'].invoke(\"getNetworkType\", {}, () => {\n                callback && callback();\n            });\n        } catch (e) {\n            callback && callback();\n        }\n    } else {\n        callback && callback();\n    }\n}\n\nfunction fixAudioExtension(targetUrl, replaceExt) {\n    let ext = Laya.Utils.getFileExtension(targetUrl);\n    let searchExt = !!ext ? `.${ext}` : '';\n    if (env.isConchApp() && searchExt != \".wav\" && searchExt != \".ogg\") {\n        return targetUrl.substr(0, targetUrl.length - searchExt.length) + replaceExt;\n    }\n    return targetUrl;\n}\n\nclass AudioController {\n\n    private _auidoUrl = '';\n    private _chancel: Laya.SoundChannel = null;\n    private _playing = false;\n    private _onPlay = null;\n    private _onPause = null;\n    private _onStop = null;\n    private _onError = null;\n    private _onProgress = null;\n    private _onComplete = null;\n    private _position = -1;\n    private _duration = -1;\n    private _paused = false;\n    private _type = 'sound';\n    private _playTime = 0;\n\n    constructor(type) {\n        this._type = type;\n    }\n\n    private _update() {\n        if (this._chancel) {\n            this._position = this._chancel.position;\n            this._duration = this._chancel.duration;\n            if (!this._playing && this._position > 0) {\n                this._playing = true;\n                this._onPlay && this._onPlay();\n            }\n            if (this._playing && this._duration > 0) {\n                this._onProgress && this._onProgress({\n                    position: this.position,\n                    duration: this.duration,\n                });\n            } else if (Date.now() - this._playTime > 2000) {\n                this._onError && this._onError();\n                this.stop();\n            }\n        }\n    }\n\n    public onPlay(callback) {\n        this._onPlay = callback;\n    }\n\n    public onStop(callback) {\n        this._onStop = callback;\n    }\n\n    public onPause(callback) {\n        this._onPause = callback;\n    }\n\n    public onProgress(callback) {\n        this._onProgress = callback;\n    }\n\n    public onComplete(callback) {\n        this._onComplete = callback;\n    }\n\n    public onError(callback) {\n        this._onError = callback;\n    }\n\n    public set url(url) {\n        if (this._auidoUrl != url) {\n            this._auidoUrl = url;\n            this.stop();\n        }\n    }\n\n    public get url() {\n        return this._auidoUrl;\n    }\n\n    public get type() {\n        return this._type;\n    }\n\n    public get position() {\n        return this._position;\n    }\n\n    public get duration() {\n        return this._duration;\n    }\n\n    public isPaused() {\n        return this._paused;\n    }\n\n    public isPlaying() {\n        return this._playing;\n    }\n\n    public play(loops: number = 1) {\n        fixWechatAudioPlay(() => {\n            if (this._auidoUrl) {\n                this.stop();\n                let playUrl = fixAudioExtension(this._auidoUrl, '.ogg');\n                this._playTime = Date.now();\n                this._chancel = Laya.SoundManager.playSound(playUrl, loops, Laya.Handler.create(this, () => {\n                    this._onComplete && this._onComplete();\n                    this.stop();\n                }), null, 0);\n                loop.loop(this, this._update);\n            }\n        });\n    }\n\n    public pause() {\n        if (this._chancel && this._playing) {\n            this._onPause && this._onPause();\n            this._chancel.pause();\n            this._paused = true;\n            this._playing = false;\n            loop.clear(this, this._update);\n        }\n    }\n\n    public resume() {\n        if (this._chancel && this._paused) {\n            this._paused = false;\n            this._chancel.resume();\n            loop.loop(this, this._update);\n        }\n    }\n\n    public stop() {\n        if (this._chancel) {\n            this._onStop && this._onStop();\n            this._chancel.stop();\n            this._chancel = null;\n            this._paused = false;\n            this._playing = false;\n            Laya.SoundManager.removeChannel(this._chancel);\n            Laya.SoundManager.destroySound(this._auidoUrl);\n            loop.clear(this, this._update);\n        }\n    }\n\n    public destroy() {\n        this.stop();\n        this._onComplete = null;\n        this._onProgress = null;\n        this._onPlay = null;\n        this._onStop = null;\n        this._onPause = null;\n    }\n\n}\n\nlet _musicAudio = new AudioController('music')\n\nfunction playMusic(url: string, loops: number = 1) {\n    _musicAudio.url = url;\n    _musicAudio.play(loops);\n    return _musicAudio;\n}\n\nfunction playSound(url: string, loops: number = 1) {\n    let audio = new AudioController('sound');\n    audio.url = url;\n    audio.play(loops);\n    return audio;\n}\n\nfunction stopMusic() {\n    _musicAudio.stop();\n}\n\nfunction stopAll() {\n    Laya.SoundManager.stopAll();\n}\n\nfunction stopAllSound() {\n    Laya.SoundManager.stopAllSound();\n}\n\nexport default {\n    playMusic,\n    playSound,\n    stopAll,\n    stopMusic,\n    stopAllSound,\n}","function removeItemForWhere(array, where) {\n    if (typeof where === 'function') {\n        let removeIndexArray = []\n        array.forEach((value, index) => {\n            if (where(value)) {\n                removeIndexArray.push(index)\n            }\n        })\n        removeIndexArray.reverse()\n        removeIndexArray.forEach(index => {\n            array.splice(index, 1);\n        })\n    }\n}\n\nclass Looper {\n\n    private _tasks = [];\n    private _hasLoop = false;\n\n    private _checkLoop() {\n        if (this._tasks.length > 0) {\n            if (!this._hasLoop) {\n                Laya.timer.frameLoop(1, this, () => {\n                    this._tasks.forEach(task => {\n                        let { caller, callback } = task;\n                        callback.apply(caller);\n                    });\n                });\n                this._hasLoop = true;\n            }\n        } else {\n            if (this._hasLoop) {\n                Laya.timer.clearAll(this);\n                this._hasLoop = false;\n            }\n        }\n    }\n\n    public loop(caller: Object, callback: () => void) {\n        let filterTasks = this._tasks.filter((task) => {\n            return task.caller == caller && task.callback == callback;\n        })\n        if (filterTasks.length == 0) {\n            this._tasks.push({\n                caller,\n                callback,\n            });\n            this._checkLoop();\n        }\n    }\n\n    public clear(caller: Object, callback: () => void) {\n        removeItemForWhere(this._tasks, (task) => {\n            return task.caller == caller && (!callback || task.callback == callback);\n        });\n        this._checkLoop();\n    }\n\n}\n\nexport default new Looper;","module runtime {\n\n    export let clickSound = null;\n    export let scaleTime: number = 100;\n    export let scaleSmallValue: number = 0.8;\n    export let scaleBigValue: number = 1;\n\n    function pivotCenter(view) {\n        view.x = view.x + view.width / 2 - view.pivotX;\n        view.y = view.y + view.height / 2 - view.pivotY;\n        view.pivot(view.width / 2, view.height / 2);\n    }\n\n    function viewScale(view, scale) {\n        pivotCenter(view);\n        Laya.Tween.to(view, { scaleX: scale, scaleY: scale }, scaleTime);\n    }\n\n    function playClickSound(sound) {\n        if (sound) {\n            sound != 'none' && Laya.SoundManager.playSound(sound, 1);\n        } else if (clickSound) {\n            clickSound != 'none' && Laya.SoundManager.playSound(clickSound, 1);\n        }\n    }\n\n    export function bindClick(view) {\n        view.offAll();\n        view.on(Laya.Event.MOUSE_DOWN, view, () => viewScale(view, scaleSmallValue));\n        view.on(Laya.Event.MOUSE_UP, view, () => viewScale(view, scaleBigValue));\n        view.on(Laya.Event.MOUSE_OUT, view, () => viewScale(view, scaleBigValue));\n        view.on(Laya.Event.CLICK, view, () => playClickSound(view.sound));\n    }\n\n    export class btn extends Laya.Button {\n\n        public sound = null;\n\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_img extends Laya.Image {\n\n        public sound = null;\n\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_label extends Laya.Label {\n\n        public sound = null;\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_sprite extends Laya.Sprite {\n\n        public sound = null;\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_box extends Laya.Box {\n\n        public sound = null;\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n}\n\nexport default runtime;","import { toAny } from \"../utils/any\";\n\nfunction randomUUID() {\n    let _s4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    return (_s4() + _s4() + \"-\" + _s4() + \"-\" + _s4() + \"-\" + _s4() + \"-\" + _s4() + _s4() + _s4());\n}\n\nfunction randomNumber(minNum: number, maxNum: number) {\n    switch (arguments.length) {\n        case 1:\n            return Math.random() * minNum + 1;\n        case 2:\n            return Math.random() * (maxNum - minNum + 1) + minNum;\n        default:\n            return 0;\n    }\n}\n\nfunction randomInteger(minNum: number, maxNum: number) {\n    switch (arguments.length) {\n        case 1:\n            return Math.floor(Math.random() * minNum + 1);\n        case 2:\n            return Math.floor(Math.random() * (maxNum - minNum + 1) + minNum);\n        default:\n            return 0;\n    }\n}\n\nfunction randomArray(source: any[], length: number = -1): Array<any> {\n    let randomLength = length == -1 ? source.length : length;\n    randomLength = Math.min(randomLength, source.length);\n    var copy: Array<any> = source.concat([]);\n    var result: Array<any> = [];\n    while (result.length < randomLength) {\n        let randomObj = randomArrayItem(copy);\n        result.push(randomObj);\n        copy.splice(copy.indexOf(randomLength), 1);\n    }\n    return result;\n}\n\nfunction randomArrayItem(source: any[]): any {\n    if (source.length > 0) {\n        return source[Math.floor(Math.random() * source.length)];\n    }\n    return undefined;\n}\n\nexport default {\n    randomUUID,\n    randomInteger,\n    randomNumber,\n    randomArray,\n    randomArrayItem,\n    toAny\n}","function _toNumber_(value) {\n    try {\n        return JSON.parse(value);\n    } catch (ex) {\n        return parseFloat(value);\n    }\n}\n\nfunction _toBoolean_(value) {\n    return !!value && value != 'false' && value != '0';\n}\n\nfunction _toString_(value, def) {\n    try {\n        let type = typeof value;\n        if (type === 'string') {\n            return value;\n        } else if (type === 'boolean') {\n            return value ? 'true' : 'false';\n        } else if (type === 'number') {\n            return `${value}`;\n        } else if (type === 'object') {\n            return JSON.stringify(value);\n        }\n    } catch (ex) {\n    }\n    return def;\n}\n\nfunction _toObject_(value, def) {\n    if (typeof value === 'object') {\n        return value;\n    }\n    try {\n        return JSON.parse(value);\n    } catch (ex) {\n    }\n    return def;\n}\n\nfunction _inferType(value) {\n    if (typeof value !== 'string') {\n        return typeof value;\n    }\n    try {\n        const parsed = JSON.parse(value);\n        return typeof parsed;\n    } catch (ex) {\n        // might be a pure number\n        const number = parseFloat(value);\n        if (!isNaN(number) && `${number}` === value) {\n            return 'number';\n        }\n        return 'string';\n    }\n}\n\nexport function toAny(value, def) {\n    if (value === undefined || value === null) {\n        return def;\n    }\n    // try to infer type and return\n    let type = _inferType(value);\n    if (def !== undefined && def !== null) {\n        type = typeof def;\n    }\n    switch (type) {\n        case 'number':\n            return _toNumber_(value);\n        case 'boolean':\n            return _toBoolean_(value);\n        case 'object':\n            return _toObject_(value, def);\n        case 'string':\n            return _toString_(value, def);\n        default:\n            break;\n    }\n    return def;\n}","import NavStack from \"../navigator/stack\";\nimport ui from \"./ui\";\nimport screen from \"../manager/screen\";\n\nexport default class Activity extends ui {\n\n    static open(params, action) {\n        NavStack.navigate(this, params, action);\n    }\n\n    static finish() {\n        NavStack.finish(this);\n    }\n\n    static res = [];\n    static single = false;\n\n    public page = null;\n    public params = {};\n    public duration = 0;\n    public easeIn = null;\n    public easeOut = null;\n    public fromProps = null;\n    public toProps = null;\n\n    public onFocus?(focus): void;\n    public onCreate?(): void;\n    public onResume?(): void;\n    public onPause?(): void;\n    public onDestroy?(): void;\n    public onNextProgress?(progress): void;\n\n    constructor(options) {\n        super(() => { this.back(); });\n        this.width = screen.getDesignWidth();\n        this.height = screen.getDesignHeight();\n        this.params = Object.assign({}, options.params || {});\n        this.page = options.page;\n    }\n\n    //////////////////////////\n    /// navigator function\n    //////////////////////////\n\n    redirectTo(page, params = {}, action = null, single = false) {\n        this.navigate(page, params, () => {\n            this.back();\n            action && action();\n        }, single);\n    }\n\n    navigate(page, params = {}, action = null, single = false) {\n        NavStack.navigate(page, params, action, single);\n    }\n\n    back() {\n        NavStack.finish(this.page, this);\n    }\n\n    finish(page = this.page, instance = null) {\n        NavStack.finish(page, instance);\n    }\n\n    pop(number = 1) {\n        NavStack.pop(number);\n    }\n\n    popToTop() {\n        NavStack.popToTop();\n    }\n\n}","import popup from \"./popupmanager\";\nimport screen from \"../manager/screen\";\nimport ui from \"./ui\";\n\nexport default class PopupView extends ui {\n\n    static show(params, onHide) {\n        popup.showPopup(this, params, onHide);\n    }\n\n    static hide(result) {\n        popup.hidePopup(this, null, result);\n    }\n\n    public popup;\n    public params;\n    public duration = 500;\n    public easeIn = null;\n    public easeOut = null;\n    public fromProps = null;\n    public toProps = null;\n    public onShow?(): void;\n    public onHide?(): void;\n    public isTranslucent = false;\n    public canceledOnTouchOutside = false;\n\n    public hide(result = null) {\n        popup.hidePopup(this.popup, this, result);\n    }\n\n    constructor() {\n        super(() => {\n            this.hide();\n        });\n        this.nonPenetrating = true;\n        this.width = screen.getDesignWidth();\n        this.height = screen.getDesignHeight();\n    }\n\n}","import toast from \"./toastmanager\";\nimport screen from \"../manager/screen\";\nimport ui from \"./ui\";\n\nexport default class ToastView extends ui {\n\n    static show(params, onHide) {\n        toast.showToast(this, params, onHide);\n    }\n\n    static hide() {\n        toast.hideToast(this);\n    }\n\n    public toast;\n    public params;\n    public duration = 200;\n    public displayDuration = 1000;\n    public easeIn = null;\n    public easeOut = null;\n    public fromProps = null;\n    public toProps = null;\n    public onShow?(): void;\n    public onHide?(): void;\n\n    constructor() {\n        super(() => { this.hide() });\n        this.width = screen.getDesignWidth();\n        this.height = screen.getDesignHeight();\n    }\n\n    public hide() {\n        toast.hideToast(this.toast, this);\n    }\n\n}","import env from \"../utils/env\";\nimport { initScreen } from \"./manager/screen\";\nimport { initNavigator, setNavigatorReady } from \"./navigator/init\";\n\nlet _inited = false;\n\nexport function init(width: number, height: number, ...options) {\n    if (_inited) {\n        return;\n    }\n    if (!env.isLayaApp()) {\n        env.printError('Please ensure that the \\'Laya\\' library has been introduced.');\n        return;\n    }\n    env.printDebug(`init...`);\n    env.printDebug(`tape version: ${env.getVersion()}`);\n    env.printDebug(`app version: ${env.getAppVersion()}`);\n    env.printDebug(`app debug: ${env.isDebug()}`);\n    env.printDebug(`env: ${env.getEnv()}`);\n    initScreen(false, width, height, ...options);\n    _inited = true;\n}\n\nexport function init3D(width: number, height: number, ...options) {\n    if (_inited) {\n        return;\n    }\n    if (!env.isLayaApp()) {\n        env.printError('Please ensure that the \\'Laya\\' library has been introduced.');\n        return;\n    }\n    env.printDebug(`init3D...`);\n    env.printDebug(`tape version: ${env.getVersion()}`);\n    env.printDebug(`app version: ${env.getAppVersion()}`);\n    env.printDebug(`app debug: ${env.isDebug()}`);\n    env.printDebug(`env: ${env.getEnv()}`);\n    initScreen(true, width, height, ...options);\n    _inited = true;\n}\n\nexport function start(options, onLoaded = null) {\n    if (!_inited) {\n        env.printError('Please complete the initialization of Tape first.');\n        return;\n    }\n    if (!options) {\n        options = {};\n    }\n    let newOptions = {\n        mainPage: options.mainPage || null,\n        commonRes: options.commonRes || [],\n        fileVersion: options.fileVersion,\n        onLoadProgress: (progress) => {\n            options.onLoadProgress && options.onLoadProgress(progress);\n        },\n        onLoaded: () => {\n            onLoaded && onLoaded();\n            options.onLoaded && options.onLoaded();\n        }\n    }\n    initNavigator(newOptions);\n    setNavigatorReady();\n}"],"sourceRoot":""}